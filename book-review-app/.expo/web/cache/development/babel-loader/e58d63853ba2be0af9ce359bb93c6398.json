{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useNavigation } from \"@react-navigation/core\";\nimport { createUserWithEmailAndPassword, onAuthStateChanged, signInWithEmailAndPassword } from \"firebase/auth\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { auth } from \"../config/firebase-config\";\nimport AuthContext from \"../context/AuthContext\";\nimport Loading from \"../Loading/Loading\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar LoginScreen = function LoginScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useContext = useContext(AuthContext),\n      user = _useContext.user,\n      setUser = _useContext.setUser;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      errorMessage = _useState6[0],\n      setError = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  useEffect(function () {\n    var unsubscribe = onAuthStateChanged(auth, function (currentUser) {\n      if (currentUser) {\n        setUser(currentUser);\n        navigation.replace(\"Home\");\n      }\n    });\n    return unsubscribe;\n  }, []);\n\n  var handleLogin = function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setLoading(true);\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(signInWithEmailAndPassword(auth, email, password).then(function (userCredentials) {\n              var user = userCredentials.user;\n            }).catch(function (error) {\n              if (error.code === \"auth/invalid-email\") {\n                setError(\"Invalid Email Entered !!!\");\n              } else if (error.code === \"auth/user-not-found\") {\n                setError(\"Email not found !!!\");\n              } else if (error.code === \"auth/wrong-password\") {\n                setError(\"Wrong Password Entered !!!\");\n              } else if (error.code === \"auth/internal-error\") {\n                setError(\"Username or Password Empty !!!\");\n              } else console.log(error);\n            }));\n\n          case 3:\n            setLoading(false);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  if (loading) return _jsx(Loading, {});\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(Text, {\n      style: styles.greeting,\n      children: [\"Hello again,\", \"\\n\", \"Welcome back.\"]\n    }), _jsx(View, {\n      style: styles.errorMessage,\n      children: errorMessage && _jsx(Text, {\n        style: styles.error,\n        children: errorMessage\n      })\n    }), _jsxs(View, {\n      style: styles.form,\n      children: [_jsxs(View, {\n        children: [_jsx(Text, {\n          style: styles.inputTitle,\n          children: \"Email Address\"\n        }), _jsx(TextInput, {\n          placeholder: \"\",\n          value: email,\n          onChangeText: function onChangeText(text) {\n            return setEmail(text);\n          },\n          style: styles.input\n        })]\n      }), _jsxs(View, {\n        style: {\n          marginTop: 24\n        },\n        children: [_jsx(Text, {\n          style: styles.inputTitle,\n          children: \"Password\"\n        }), _jsx(TextInput, {\n          placeholder: \"\",\n          value: password,\n          onChangeText: function onChangeText(text) {\n            return setPassword(text);\n          },\n          style: styles.input,\n          secureTextEntry: true\n        })]\n      })]\n    }), _jsx(TouchableOpacity, {\n      onPress: handleLogin,\n      style: styles.button,\n      children: _jsx(Text, {\n        style: styles.buttonText,\n        children: \"Login\"\n      })\n    }), _jsx(TouchableOpacity, {\n      style: {\n        alignSelf: \"center\",\n        marginTop: 32\n      },\n      onPress: function onPress() {\n        return navigation.navigate(\"Registration\");\n      },\n      children: _jsxs(Text, {\n        style: {\n          fontSize: 14,\n          color: \"#414959\"\n        },\n        children: [\"New in App?\", \" \", _jsx(Text, {\n          style: {\n            fontWeight: \"600\",\n            color: \"#0782F9\"\n          },\n          children: \"Registration\"\n        })]\n      })\n    }), _jsx(View, {\n      style: styles.buttonContainer\n    })]\n  });\n};\n\nexport default LoginScreen;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: 30\n  },\n  greeting: {\n    marginTop: 32,\n    fontSize: 24,\n    fontWeight: \"500\",\n    textAlign: \"center\"\n  },\n  errorMessage: {\n    height: 72,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginHorizontal: 20\n  },\n  error: {\n    color: \"#ff1717\",\n    fontWeight: \"600\",\n    fontSize: 14,\n    textAlign: \"center\"\n  },\n  form: {\n    marginBottom: 48,\n    marginHorizontal: 30,\n    width: \"100%\"\n  },\n  inputTitle: {\n    color: \"#8A8F9E\",\n    fontSize: 10,\n    textTransform: \"uppercase\"\n  },\n  input: {\n    borderBottomColor: \"#8A8F9E\",\n    borderBottomWidth: StyleSheet.hairlineWidth,\n    height: 40,\n    fontSize: 15,\n    color: \"#161F3D\"\n  },\n  button: {\n    backgroundColor: \"#0782F9\",\n    width: \"100%\",\n    borderRadius: 4,\n    alignItems: \"center\",\n    height: 48,\n    marginHorizontal: 30,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  buttonText: {\n    color: \"#FFF\",\n    fontWeight: \"600\",\n    fontSize: 16\n  }\n});","map":{"version":3,"names":["useNavigation","createUserWithEmailAndPassword","onAuthStateChanged","signInWithEmailAndPassword","React","useContext","useEffect","useState","auth","AuthContext","Loading","LoginScreen","navigation","user","setUser","email","setEmail","password","setPassword","errorMessage","setError","loading","setLoading","unsubscribe","currentUser","replace","handleLogin","then","userCredentials","catch","error","code","console","log","styles","container","greeting","form","inputTitle","text","input","marginTop","button","buttonText","alignSelf","navigate","fontSize","color","fontWeight","buttonContainer","StyleSheet","create","flex","justifyContent","alignItems","padding","textAlign","height","marginHorizontal","marginBottom","width","textTransform","borderBottomColor","borderBottomWidth","hairlineWidth","backgroundColor","borderRadius"],"sources":["E:/Bohubrihi Full Stack Course/React Native Practice File/book-review-app/src/screens/LoginScreen.jsx"],"sourcesContent":["import { useNavigation } from \"@react-navigation/core\";\r\nimport {\r\n  createUserWithEmailAndPassword,\r\n  onAuthStateChanged,\r\n  signInWithEmailAndPassword,\r\n} from \"firebase/auth\";\r\n\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  KeyboardAvoidingView,\r\n  StyleSheet,\r\n  Text,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  View,\r\n} from \"react-native\";\r\nimport { auth } from \"../config/firebase-config\";\r\nimport AuthContext from \"../context/AuthContext\";\r\nimport Loading from \"../Loading/Loading\";\r\n\r\nconst LoginScreen = ({ navigation }) => {\r\n  const { user, setUser } = useContext(AuthContext);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [errorMessage, setError] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\r\n      if (currentUser) {\r\n        setUser(currentUser);\r\n        navigation.replace(\"Home\");\r\n      }\r\n    });\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const handleLogin = async () => {\r\n    setLoading(true);\r\n    await signInWithEmailAndPassword(auth, email, password)\r\n      .then((userCredentials) => {\r\n        const user = userCredentials.user;\r\n        // console.log('Logged in with:', user);\r\n      })\r\n      .catch((error) => {\r\n        if (error.code === \"auth/invalid-email\") {\r\n          setError(\"Invalid Email Entered !!!\");\r\n        } else if (error.code === \"auth/user-not-found\") {\r\n          setError(\"Email not found !!!\");\r\n        } else if (error.code === \"auth/wrong-password\") {\r\n          setError(\"Wrong Password Entered !!!\");\r\n        } else if (error.code === \"auth/internal-error\") {\r\n          setError(\"Username or Password Empty !!!\");\r\n        } else console.log(error);\r\n      });\r\n    setLoading(false);\r\n  };\r\n\r\n  if (loading) return <Loading />;\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.greeting}>Hello again,{\"\\n\"}Welcome back.</Text>\r\n      <View style={styles.errorMessage}>\r\n        {errorMessage && <Text style={styles.error}>{errorMessage}</Text>}\r\n      </View>\r\n      <View style={styles.form}>\r\n        <View>\r\n          <Text style={styles.inputTitle}>Email Address</Text>\r\n          <TextInput\r\n            placeholder=\"\"\r\n            value={email}\r\n            onChangeText={(text) => setEmail(text)}\r\n            style={styles.input}\r\n          />\r\n        </View>\r\n        <View style={{ marginTop: 24 }}>\r\n          <Text style={styles.inputTitle}>Password</Text>\r\n          <TextInput\r\n            placeholder=\"\"\r\n            value={password}\r\n            onChangeText={(text) => setPassword(text)}\r\n            style={styles.input}\r\n            secureTextEntry\r\n          />\r\n        </View>\r\n      </View>\r\n      <TouchableOpacity onPress={handleLogin} style={styles.button}>\r\n        <Text style={styles.buttonText}>Login</Text>\r\n      </TouchableOpacity>\r\n      <TouchableOpacity\r\n        style={{ alignSelf: \"center\", marginTop: 32 }}\r\n        onPress={() => navigation.navigate(\"Registration\")}\r\n      >\r\n        <Text style={{ fontSize: 14, color: \"#414959\" }}>\r\n          New in App?{\" \"}\r\n          <Text style={{ fontWeight: \"600\", color: \"#0782F9\" }}>\r\n            Registration\r\n          </Text>\r\n        </Text>\r\n      </TouchableOpacity>\r\n      <View style={styles.buttonContainer}></View>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default LoginScreen;\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    padding: 30,\r\n  },\r\n  greeting: {\r\n    marginTop: 32,\r\n    fontSize: 24,\r\n    fontWeight: \"500\",\r\n    textAlign: \"center\",\r\n  },\r\n  errorMessage: {\r\n    height: 72,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    marginHorizontal: 20,\r\n  },\r\n  error: {\r\n    color: \"#ff1717\",\r\n    fontWeight: \"600\",\r\n    fontSize: 14,\r\n    textAlign: \"center\",\r\n  },\r\n  form: {\r\n    marginBottom: 48,\r\n    marginHorizontal: 30,\r\n    width: \"100%\",\r\n  },\r\n  inputTitle: {\r\n    color: \"#8A8F9E\",\r\n    fontSize: 10,\r\n    textTransform: \"uppercase\",\r\n  },\r\n  input: {\r\n    borderBottomColor: \"#8A8F9E\",\r\n    borderBottomWidth: StyleSheet.hairlineWidth,\r\n    height: 40,\r\n    fontSize: 15,\r\n    color: \"#161F3D\",\r\n  },\r\n  button: {\r\n    backgroundColor: \"#0782F9\",\r\n    width: \"100%\",\r\n    borderRadius: 4,\r\n    alignItems: \"center\",\r\n    height: 48,\r\n    marginHorizontal: 30,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  buttonText: {\r\n    color: \"#FFF\",\r\n    fontWeight: \"600\",\r\n    fontSize: 16,\r\n  },\r\n});\r\n"],"mappings":";;AAAA,SAASA,aAAT,QAA8B,wBAA9B;AACA,SACEC,8BADF,EAEEC,kBAFF,EAGEC,0BAHF,QAIO,eAJP;AAMA,OAAOC,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;;;;;;;AASA,SAASC,IAAT;AACA,OAAOC,WAAP;AACA,OAAOC,OAAP;;;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,OAAoB;EAAA,IAAjBC,UAAiB,QAAjBA,UAAiB;;EACtC,kBAA0BP,UAAU,CAACI,WAAD,CAApC;EAAA,IAAQI,IAAR,eAAQA,IAAR;EAAA,IAAcC,OAAd,eAAcA,OAAd;;EACA,gBAA0BP,QAAQ,CAAC,EAAD,CAAlC;EAAA;EAAA,IAAOQ,KAAP;EAAA,IAAcC,QAAd;;EACA,iBAAgCT,QAAQ,CAAC,EAAD,CAAxC;EAAA;EAAA,IAAOU,QAAP;EAAA,IAAiBC,WAAjB;;EACA,iBAAiCX,QAAQ,CAAC,IAAD,CAAzC;EAAA;EAAA,IAAOY,YAAP;EAAA,IAAqBC,QAArB;;EACA,iBAA8Bb,QAAQ,CAAC,KAAD,CAAtC;EAAA;EAAA,IAAOc,OAAP;EAAA,IAAgBC,UAAhB;;EAEAhB,SAAS,CAAC,YAAM;IACd,IAAMiB,WAAW,GAAGrB,kBAAkB,CAACM,IAAD,EAAO,UAACgB,WAAD,EAAiB;MAC5D,IAAIA,WAAJ,EAAiB;QACfV,OAAO,CAACU,WAAD,CAAP;QACAZ,UAAU,CAACa,OAAX,CAAmB,MAAnB;MACD;IACF,CALqC,CAAtC;IAMA,OAAOF,WAAP;EACD,CARQ,EAQN,EARM,CAAT;;EAUA,IAAMG,WAAW,GAAG;IAAA;MAAA;QAAA;UAAA;YAClBJ,UAAU,CAAC,IAAD,CAAV;YADkB;YAAA,iCAEZnB,0BAA0B,CAACK,IAAD,EAAOO,KAAP,EAAcE,QAAd,CAA1B,CACHU,IADG,CACE,UAACC,eAAD,EAAqB;cACzB,IAAMf,IAAI,GAAGe,eAAe,CAACf,IAA7B;YAED,CAJG,EAKHgB,KALG,CAKG,UAACC,KAAD,EAAW;cAChB,IAAIA,KAAK,CAACC,IAAN,KAAe,oBAAnB,EAAyC;gBACvCX,QAAQ,CAAC,2BAAD,CAAR;cACD,CAFD,MAEO,IAAIU,KAAK,CAACC,IAAN,KAAe,qBAAnB,EAA0C;gBAC/CX,QAAQ,CAAC,qBAAD,CAAR;cACD,CAFM,MAEA,IAAIU,KAAK,CAACC,IAAN,KAAe,qBAAnB,EAA0C;gBAC/CX,QAAQ,CAAC,4BAAD,CAAR;cACD,CAFM,MAEA,IAAIU,KAAK,CAACC,IAAN,KAAe,qBAAnB,EAA0C;gBAC/CX,QAAQ,CAAC,gCAAD,CAAR;cACD,CAFM,MAEAY,OAAO,CAACC,GAAR,CAAYH,KAAZ;YACR,CAfG,CAFY;;UAAA;YAkBlBR,UAAU,CAAC,KAAD,CAAV;;UAlBkB;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAApB;;EAqBA,IAAID,OAAJ,EAAa,OAAO,KAAC,OAAD,KAAP;EAEb,OACE,MAAC,IAAD;IAAM,KAAK,EAAEa,MAAM,CAACC,SAApB;IAAA,WACE,MAAC,IAAD;MAAM,KAAK,EAAED,MAAM,CAACE,QAApB;MAAA,2BAA2C,IAA3C;IAAA,EADF,EAEE,KAAC,IAAD;MAAM,KAAK,EAAEF,MAAM,CAACf,YAApB;MAAA,UACGA,YAAY,IAAI,KAAC,IAAD;QAAM,KAAK,EAAEe,MAAM,CAACJ,KAApB;QAAA,UAA4BX;MAA5B;IADnB,EAFF,EAKE,MAAC,IAAD;MAAM,KAAK,EAAEe,MAAM,CAACG,IAApB;MAAA,WACE,MAAC,IAAD;QAAA,WACE,KAAC,IAAD;UAAM,KAAK,EAAEH,MAAM,CAACI,UAApB;UAAA;QAAA,EADF,EAEE,KAAC,SAAD;UACE,WAAW,EAAC,EADd;UAEE,KAAK,EAAEvB,KAFT;UAGE,YAAY,EAAE,sBAACwB,IAAD;YAAA,OAAUvB,QAAQ,CAACuB,IAAD,CAAlB;UAAA,CAHhB;UAIE,KAAK,EAAEL,MAAM,CAACM;QAJhB,EAFF;MAAA,EADF,EAUE,MAAC,IAAD;QAAM,KAAK,EAAE;UAAEC,SAAS,EAAE;QAAb,CAAb;QAAA,WACE,KAAC,IAAD;UAAM,KAAK,EAAEP,MAAM,CAACI,UAApB;UAAA;QAAA,EADF,EAEE,KAAC,SAAD;UACE,WAAW,EAAC,EADd;UAEE,KAAK,EAAErB,QAFT;UAGE,YAAY,EAAE,sBAACsB,IAAD;YAAA,OAAUrB,WAAW,CAACqB,IAAD,CAArB;UAAA,CAHhB;UAIE,KAAK,EAAEL,MAAM,CAACM,KAJhB;UAKE,eAAe;QALjB,EAFF;MAAA,EAVF;IAAA,EALF,EA0BE,KAAC,gBAAD;MAAkB,OAAO,EAAEd,WAA3B;MAAwC,KAAK,EAAEQ,MAAM,CAACQ,MAAtD;MAAA,UACE,KAAC,IAAD;QAAM,KAAK,EAAER,MAAM,CAACS,UAApB;QAAA;MAAA;IADF,EA1BF,EA6BE,KAAC,gBAAD;MACE,KAAK,EAAE;QAAEC,SAAS,EAAE,QAAb;QAAuBH,SAAS,EAAE;MAAlC,CADT;MAEE,OAAO,EAAE;QAAA,OAAM7B,UAAU,CAACiC,QAAX,CAAoB,cAApB,CAAN;MAAA,CAFX;MAAA,UAIE,MAAC,IAAD;QAAM,KAAK,EAAE;UAAEC,QAAQ,EAAE,EAAZ;UAAgBC,KAAK,EAAE;QAAvB,CAAb;QAAA,0BACc,GADd,EAEE,KAAC,IAAD;UAAM,KAAK,EAAE;YAAEC,UAAU,EAAE,KAAd;YAAqBD,KAAK,EAAE;UAA5B,CAAb;UAAA;QAAA,EAFF;MAAA;IAJF,EA7BF,EAwCE,KAAC,IAAD;MAAM,KAAK,EAAEb,MAAM,CAACe;IAApB,EAxCF;EAAA,EADF;AA4CD,CApFD;;AAsFA,eAAetC,WAAf;AAEA,IAAMuB,MAAM,GAAGgB,UAAU,CAACC,MAAX,CAAkB;EAC/BhB,SAAS,EAAE;IACTiB,IAAI,EAAE,CADG;IAETC,cAAc,EAAE,QAFP;IAGTC,UAAU,EAAE,QAHH;IAITC,OAAO,EAAE;EAJA,CADoB;EAO/BnB,QAAQ,EAAE;IACRK,SAAS,EAAE,EADH;IAERK,QAAQ,EAAE,EAFF;IAGRE,UAAU,EAAE,KAHJ;IAIRQ,SAAS,EAAE;EAJH,CAPqB;EAa/BrC,YAAY,EAAE;IACZsC,MAAM,EAAE,EADI;IAEZH,UAAU,EAAE,QAFA;IAGZD,cAAc,EAAE,QAHJ;IAIZK,gBAAgB,EAAE;EAJN,CAbiB;EAmB/B5B,KAAK,EAAE;IACLiB,KAAK,EAAE,SADF;IAELC,UAAU,EAAE,KAFP;IAGLF,QAAQ,EAAE,EAHL;IAILU,SAAS,EAAE;EAJN,CAnBwB;EAyB/BnB,IAAI,EAAE;IACJsB,YAAY,EAAE,EADV;IAEJD,gBAAgB,EAAE,EAFd;IAGJE,KAAK,EAAE;EAHH,CAzByB;EA8B/BtB,UAAU,EAAE;IACVS,KAAK,EAAE,SADG;IAEVD,QAAQ,EAAE,EAFA;IAGVe,aAAa,EAAE;EAHL,CA9BmB;EAmC/BrB,KAAK,EAAE;IACLsB,iBAAiB,EAAE,SADd;IAELC,iBAAiB,EAAEb,UAAU,CAACc,aAFzB;IAGLP,MAAM,EAAE,EAHH;IAILX,QAAQ,EAAE,EAJL;IAKLC,KAAK,EAAE;EALF,CAnCwB;EA0C/BL,MAAM,EAAE;IACNuB,eAAe,EAAE,SADX;IAENL,KAAK,EAAE,MAFD;IAGNM,YAAY,EAAE,CAHR;IAINZ,UAAU,EAAE,QAJN;IAKNG,MAAM,EAAE,EALF;IAMNC,gBAAgB,EAAE,EANZ;IAONJ,UAAU,EAAE,QAPN;IAQND,cAAc,EAAE;EARV,CA1CuB;EAoD/BV,UAAU,EAAE;IACVI,KAAK,EAAE,MADG;IAEVC,UAAU,EAAE,KAFF;IAGVF,QAAQ,EAAE;EAHA;AApDmB,CAAlB,CAAf"},"metadata":{},"sourceType":"module"}