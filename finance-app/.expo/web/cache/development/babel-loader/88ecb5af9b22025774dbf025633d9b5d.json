{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { StatusBar } from \"expo-status-bar\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { styles } from \"./styles\";\nimport { createUserWithEmailAndPassword, onAuthStateChanged, updateProfile } from \"firebase/auth\";\nimport { auth } from \"../components/firebase-config\";\nimport Loading from \"../components/Loading\";\nimport AuthContext from \"../context/AuthContext\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var Registration = function Registration(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useContext = useContext(AuthContext),\n      setUser = _useContext.setUser;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      username = _useState2[0],\n      setUsername = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      email = _useState4[0],\n      setEmail = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      password = _useState6[0],\n      setPassword = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      errorMessage = _useState8[0],\n      setError = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      loading = _useState10[0],\n      setLoading = _useState10[1];\n\n  useEffect(function () {\n    var unsubscribe = onAuthStateChanged(auth, function (currentUser) {\n      if (currentUser) {\n        navigation.replace(\"Home\");\n      }\n    });\n    return unsubscribe;\n  }, []);\n\n  var handleLog = function handleLog() {\n    navigation.navigate(\"Login\");\n  };\n\n  var handleReg = function _callee2() {\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setLoading(true);\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(createUserWithEmailAndPassword(auth, email, password).then(function _callee(userCredentials) {\n              return _regeneratorRuntime.async(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.next = 2;\n                      return _regeneratorRuntime.awrap(updateProfile(auth.currentUser, {\n                        displayName: username\n                      }));\n\n                    case 2:\n                      console.log(auth.currentUser);\n                      setUser(_objectSpread(_objectSpread({}, auth.currentUser), {}, {\n                        displayName: username\n                      }));\n\n                    case 4:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, null, null, null, Promise);\n            }).catch(function (error) {\n              if (error.code === \"auth/invalid-email\") {\n                setError(\"Invalid Email Entered !!!\");\n              } else if (error.code === \"auth/weak-password\") {\n                setError(\"Password should be at least 6 characters !!!\");\n              } else if (error.code === \"auth/email-already-in-use\") {\n                setError(\"Account already exist !!!\");\n              } else if (error.code === \"auth/internal-error\") {\n                setError(\"Username or Password Empty !!!\");\n              } else alert(error);\n            }));\n\n          case 3:\n            setLoading(false);\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  if (loading) return _jsx(Loading, {});\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Image, {\n      style: styles.image,\n      source: require(\"../../assets/finance.png\")\n    }), _jsx(Text, {\n      style: styles.header,\n      children: \"- Registration Here -\"\n    }), _jsx(View, {\n      style: styles.errorMessage,\n      children: errorMessage && _jsx(Text, {\n        style: styles.error,\n        children: errorMessage\n      })\n    }), _jsx(StatusBar, {\n      style: \"auto\"\n    }), _jsx(View, {\n      style: styles.inputView,\n      children: _jsx(TextInput, {\n        style: styles.TextInput,\n        placeholder: \"Enter Username\",\n        placeholderTextColor: \"#003f5c\",\n        onChangeText: function onChangeText(username) {\n          return setUsername(username);\n        }\n      })\n    }), _jsx(View, {\n      style: styles.inputView,\n      children: _jsx(TextInput, {\n        style: styles.TextInput,\n        placeholder: \"Enter Email\",\n        placeholderTextColor: \"#003f5c\",\n        onChangeText: function onChangeText(email) {\n          return setEmail(email);\n        }\n      })\n    }), _jsx(View, {\n      style: styles.inputView,\n      children: _jsx(TextInput, {\n        style: styles.TextInput,\n        placeholder: \"Enter Password\",\n        placeholderTextColor: \"#003f5c\",\n        secureTextEntry: true,\n        onChangeText: function onChangeText(password) {\n          return setPassword(password);\n        }\n      })\n    }), _jsx(TouchableOpacity, {\n      style: styles.loginBtn,\n      onPress: handleReg,\n      children: _jsx(Text, {\n        style: styles.loginText,\n        children: \"Registration\"\n      })\n    }), _jsx(TouchableOpacity, {\n      onPress: handleLog,\n      children: _jsxs(Text, {\n        style: styles.loginTextLog,\n        children: [\"If you alreay have an account please\", _jsx(Text, {\n          style: styles.RegText,\n          children: \" Login !\"\n        })]\n      })\n    })]\n  });\n};","map":{"version":3,"names":["StatusBar","React","useState","useEffect","useContext","styles","createUserWithEmailAndPassword","onAuthStateChanged","updateProfile","auth","Loading","AuthContext","Registration","navigation","setUser","username","setUsername","email","setEmail","password","setPassword","errorMessage","setError","loading","setLoading","unsubscribe","currentUser","replace","handleLog","navigate","handleReg","then","userCredentials","displayName","console","log","catch","error","code","alert","container","image","require","header","inputView","TextInput","loginBtn","loginText","loginTextLog","RegText"],"sources":["E:/Bohubrihi Full Stack Course/React Native Practice File/finance-app/src/auth/Registration.jsx"],"sourcesContent":["import { StatusBar } from \"expo-status-bar\";\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport { Text, View, Image, TextInput, TouchableOpacity } from \"react-native\";\r\nimport { styles } from \"./styles\";\r\nimport {\r\n  createUserWithEmailAndPassword,\r\n  onAuthStateChanged,\r\n  updateProfile,\r\n} from \"firebase/auth\";\r\nimport { auth } from \"../components/firebase-config\";\r\nimport Loading from \"../components/Loading\";\r\nimport AuthContext from \"../context/AuthContext\";\r\n\r\nexport const Registration = ({ navigation }) => {\r\n  const { setUser } = useContext(AuthContext);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [errorMessage, setError] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // console.log(email, password, username);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\r\n      if (currentUser) {\r\n        navigation.replace(\"Home\");\r\n      }\r\n    });\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const handleLog = () => {\r\n    navigation.navigate(\"Login\");\r\n  };\r\n\r\n  const handleReg = async () => {\r\n    setLoading(true);\r\n    await createUserWithEmailAndPassword(auth, email, password)\r\n      .then(async (userCredentials) => {\r\n        await updateProfile(auth.currentUser, { displayName: username });\r\n        console.log(auth.currentUser);\r\n        setUser({ ...auth.currentUser, displayName: username });\r\n      })\r\n      .catch((error) => {\r\n        if (error.code === \"auth/invalid-email\") {\r\n          setError(\"Invalid Email Entered !!!\");\r\n        } else if (error.code === \"auth/weak-password\") {\r\n          setError(\"Password should be at least 6 characters !!!\");\r\n        } else if (error.code === \"auth/email-already-in-use\") {\r\n          setError(\"Account already exist !!!\");\r\n        } else if (error.code === \"auth/internal-error\") {\r\n          setError(\"Username or Password Empty !!!\");\r\n        } else alert(error);\r\n      });\r\n    setLoading(false);\r\n  };\r\n\r\n  if (loading) return <Loading />;\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Image\r\n        style={styles.image}\r\n        source={require(\"../../assets/finance.png\")}\r\n      />\r\n\r\n      <Text style={styles.header}>- Registration Here -</Text>\r\n\r\n      <View style={styles.errorMessage}>\r\n        {errorMessage && <Text style={styles.error}>{errorMessage}</Text>}\r\n      </View>\r\n\r\n      <StatusBar style=\"auto\" />\r\n      <View style={styles.inputView}>\r\n        <TextInput\r\n          style={styles.TextInput}\r\n          placeholder=\"Enter Username\"\r\n          placeholderTextColor=\"#003f5c\"\r\n          onChangeText={(username) => setUsername(username)}\r\n        />\r\n      </View>\r\n\r\n      <View style={styles.inputView}>\r\n        <TextInput\r\n          style={styles.TextInput}\r\n          placeholder=\"Enter Email\"\r\n          placeholderTextColor=\"#003f5c\"\r\n          onChangeText={(email) => setEmail(email)}\r\n        />\r\n      </View>\r\n\r\n      <View style={styles.inputView}>\r\n        <TextInput\r\n          style={styles.TextInput}\r\n          placeholder=\"Enter Password\"\r\n          placeholderTextColor=\"#003f5c\"\r\n          secureTextEntry={true}\r\n          onChangeText={(password) => setPassword(password)}\r\n        />\r\n      </View>\r\n\r\n      <TouchableOpacity style={styles.loginBtn} onPress={handleReg}>\r\n        <Text style={styles.loginText}>Registration</Text>\r\n      </TouchableOpacity>\r\n\r\n      <TouchableOpacity onPress={handleLog}>\r\n        <Text style={styles.loginTextLog}>\r\n          If you alreay have an account please\r\n          <Text style={styles.RegText}> Login !</Text>\r\n        </Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}